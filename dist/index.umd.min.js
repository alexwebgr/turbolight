var TurboLight=(()=>{var a=Object.defineProperty;var r=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var c=Object.prototype.hasOwnProperty;var u=(n,t)=>{for(var e in t)a(n,e,{get:t[e],enumerable:!0})},d=(n,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of h(t))!c.call(n,i)&&i!==e&&a(n,i,{get:()=>t[i],enumerable:!(s=r(t,i))||s.enumerable});return n};var g=n=>d(a({},"__esModule",{value:!0}),n);var m={};u(m,{default:()=>p});var o=class{constructor(t={}){this.options=Object.assign({overlayClass:"turbo-light-overlay",containerClass:"turbo-light-container",imageClass:"turbo-light-image",captionClass:"turbo-light-caption",counterClass:"turbo-light-counter",closeClass:"turbo-light-close",prevClass:"turbo-light-prev",nextClass:"turbo-light-next",activeClass:"turbo-light-active",loadingClass:"turbo-light-loading"},t),this.galleries={},this.currentGallery=null,this.currentIndex=0,this.isOpen=!1,this.handleClick=this.handleClick.bind(this),this.close=this.close.bind(this),this.next=this.next.bind(this),this.previous=this.previous.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleBackgroundClick=this.handleBackgroundClick.bind(this),this.boundClose=this.close,this.boundPrevious=this.previous,this.boundNext=this.next,this.boundHandleBackgroundClick=this.handleBackgroundClick,this.init()}init(){this.findLinks(),this.createLightboxElements()}findLinks(){this.galleries={},document.querySelectorAll("a[data-turbolight]").forEach(e=>{let s=e.dataset.turbolight,i=e.dataset.title||"",l=e.getAttribute("href");this.galleries[s]||(this.galleries[s]=[]),this.galleries[s].push({href:l,title:i,element:e}),e.removeEventListener("click",this.handleClick),e.addEventListener("click",this.handleClick)})}createLightboxElements(){this.overlay=document.createElement("div"),this.overlay.className=this.options.overlayClass,this.container=document.createElement("div"),this.container.className=this.options.containerClass,this.image=document.createElement("img"),this.image.className=this.options.imageClass,this.caption=document.createElement("div"),this.caption.className=this.options.captionClass,this.counter=document.createElement("div"),this.counter.className=this.options.counterClass,this.closeButton=document.createElement("button"),this.closeButton.className=this.options.closeClass,this.closeButton.innerHTML="&times;",this.closeButton.setAttribute("aria-label","Close lightbox"),this.prevButton=document.createElement("button"),this.prevButton.className=this.options.prevClass,this.prevButton.innerHTML="&#10094;",this.prevButton.setAttribute("aria-label","Previous image"),this.nextButton=document.createElement("button"),this.nextButton.className=this.options.nextClass,this.nextButton.innerHTML="&#10095;",this.nextButton.setAttribute("aria-label","Next image"),this.container.appendChild(this.image),this.container.appendChild(this.caption),this.overlay.appendChild(this.container),this.overlay.appendChild(this.counter),this.overlay.appendChild(this.closeButton),this.overlay.appendChild(this.prevButton),this.overlay.appendChild(this.nextButton),this.closeButton.addEventListener("click",this.boundClose),this.prevButton.addEventListener("click",this.boundPrevious),this.nextButton.addEventListener("click",this.boundNext),this.overlay.addEventListener("click",this.boundHandleBackgroundClick),document.body.appendChild(this.overlay)}handleClick(t){t.preventDefault();let e=t.currentTarget;this.open(e)}open(t){this.overlay||this.createLightboxElements();let e=t.dataset.turbolight;this.currentGallery=e;let i=this.galleries[e].findIndex(l=>l.element===t);this.overlay.classList.add(this.options.activeClass),this.isOpen=!0,document.body.style.overflow="hidden",this.showImage(i),document.addEventListener("keydown",this.handleKeyDown)}close(){this.overlay&&(this.overlay.remove(),document.removeEventListener("keydown",this.handleKeyDown),document.body.style.overflow="",this.isOpen=!1,this.currentGallery=null,this.currentIndex=0,this.overlay=null,this.container=null,this.image=null,this.caption=null,this.counter=null,this.closeButton=null,this.prevButton=null,this.nextButton=null)}next(){if(!this.currentGallery)return;let t=this.galleries[this.currentGallery],e=this.currentIndex+1;e>=t.length&&(e=0),this.showImage(e)}previous(){if(!this.currentGallery)return;let t=this.galleries[this.currentGallery],e=this.currentIndex-1;e<0&&(e=t.length-1),this.showImage(e)}showImage(t){if(!this.currentGallery)return;let e=this.galleries[this.currentGallery];if(t<0||t>=e.length){console.error(`Invalid index: ${t}`);return}this.currentIndex=t;let s=e[t];this.container.classList.add(this.options.loadingClass),this.image.src=s.href,this.image.onload=()=>{this.container.classList.remove(this.options.loadingClass)},this.caption.innerHTML=s.title||"",this.updateCounter()}updateCounter(){if(!this.currentGallery)return;let t=this.galleries[this.currentGallery];this.counter.textContent=`${this.currentIndex+1} / ${t.length}`}handleKeyDown(t){if(this.isOpen)switch(t.key){case"Escape":this.close();break;case"ArrowLeft":this.previous();break;case"ArrowRight":this.next();break}}handleBackgroundClick(t){t.target===this.overlay&&this.close()}},p=o;return g(m);})();
//# sourceMappingURL=index.umd.min.js.map
