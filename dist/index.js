var l=Object.defineProperty;var a=Object.getOwnPropertyDescriptor;var c=Object.getOwnPropertyNames;var u=Object.prototype.hasOwnProperty;var d=(n,t)=>{for(var e in t)l(n,e,{get:t[e],enumerable:!0})},g=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of c(t))!u.call(n,s)&&s!==e&&l(n,s,{get:()=>t[s],enumerable:!(i=a(t,s))||i.enumerable});return n};var v=n=>g(l({},"__esModule",{value:!0}),n);var b={};d(b,{default:()=>m});module.exports=v(b);var o=class{constructor(t={}){this.options=Object.assign({imageClass:"turbo-light-image",captionClass:"turbo-light-caption",counterClass:"turbo-light-counter",closeClass:"turbo-light-close",prevClass:"turbo-light-prev",nextClass:"turbo-light-next",activeClass:"turbo-light-active",loadingClass:"turbo-light-loading"},t),this.galleries={},this.currentGallery=null,this.currentIndex=0,this.isOpen=!1,this.handleClick=this.handleClick.bind(this),this.close=this.close.bind(this),this.next=this.next.bind(this),this.previous=this.previous.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleBackgroundClick=this.handleBackgroundClick.bind(this),this.boundClose=this.close,this.boundPrevious=this.previous,this.boundNext=this.next,this.boundHandleBackgroundClick=this.handleBackgroundClick,this.init()}init(){this.findLinks(),this.cleanupExistingElements(),this.createLightboxElements()}cleanupExistingElements(){let t=document.querySelector(".turbo-light-overlay");if(t){let e=t.querySelector(".turbo-light-close"),i=t.querySelector(".turbo-light-prev"),s=t.querySelector(".turbo-light-next");e&&e.removeEventListener("click",this.boundClose),i&&i.removeEventListener("click",this.boundPrevious),s&&s.removeEventListener("click",this.boundNext),t.removeEventListener("click",this.boundHandleBackgroundClick),t.remove()}}findLinks(){this.galleries={},document.querySelectorAll("a[data-turbolight]").forEach(e=>{let i=e.dataset.turbolight,s=e.dataset.title||"",r=e.getAttribute("href");this.galleries[i]||(this.galleries[i]=[]),this.galleries[i].push({href:r,title:s,element:e}),e.removeEventListener("click",this.handleClick),e.addEventListener("click",this.handleClick)})}createLightboxElements(){this.overlay=document.createElement("div"),this.overlay.className="turbo-light-overlay",this.container=document.createElement("div"),this.container.className="turbo-light-container",this.image=document.createElement("img"),this.image.className="turbo-light-image",this.caption=document.createElement("div"),this.caption.className="turbo-light-caption",this.counter=document.createElement("div"),this.counter.className="turbo-light-counter",this.closeButton=document.createElement("button"),this.closeButton.className="turbo-light-close",this.closeButton.innerHTML="&times;",this.closeButton.setAttribute("aria-label","Close lightbox"),this.prevButton=document.createElement("button"),this.prevButton.className="turbo-light-prev",this.prevButton.innerHTML="&#10094;",this.prevButton.setAttribute("aria-label","Previous image"),this.nextButton=document.createElement("button"),this.nextButton.className="turbo-light-next",this.nextButton.innerHTML="&#10095;",this.nextButton.setAttribute("aria-label","Next image"),this.container.appendChild(this.image),this.container.appendChild(this.caption),this.overlay.appendChild(this.container),this.overlay.appendChild(this.counter),this.overlay.appendChild(this.closeButton),this.overlay.appendChild(this.prevButton),this.overlay.appendChild(this.nextButton),this.closeButton.addEventListener("click",this.boundClose),this.prevButton.addEventListener("click",this.boundPrevious),this.nextButton.addEventListener("click",this.boundNext),this.overlay.addEventListener("click",this.boundHandleBackgroundClick),document.body.appendChild(this.overlay)}handleClick(t){t.preventDefault();let e=t.currentTarget,i=e.dataset.turbolight,r=this.galleries[i].findIndex(h=>h.element===e);this.open(i,r)}open(t,e=0){if(!this.galleries[t]){console.error(`Gallery "${t}" not found`);return}this.currentGallery=t,this.currentIndex=e,this.overlay.classList.add("turbo-light-active"),this.isOpen=!0,document.addEventListener("keydown",this.handleKeyDown),this.showImage(e),document.body.style.overflow="hidden"}close(){this.overlay&&(this.overlay.classList.remove("turbo-light-active"),this.isOpen=!1,document.removeEventListener("keydown",this.handleKeyDown),document.body.style.overflow="",this.currentGallery=null,this.currentIndex=0,this.image&&(this.image.src=""),this.caption&&(this.caption.innerHTML=""),this.counter&&(this.counter.innerHTML=""))}next(){if(!this.currentGallery)return;let t=this.galleries[this.currentGallery],e=this.currentIndex+1;e>=t.length&&(e=0),this.showImage(e)}previous(){if(!this.currentGallery)return;let t=this.galleries[this.currentGallery],e=this.currentIndex-1;e<0&&(e=t.length-1),this.showImage(e)}showImage(t){if(!this.currentGallery)return;let e=this.galleries[this.currentGallery];if(t<0||t>=e.length){console.error(`Invalid index: ${t}`);return}this.currentIndex=t;let i=e[t];this.container.classList.add("turbo-light-loading"),this.image.src=i.href,this.image.onload=()=>{this.container.classList.remove("turbo-light-loading")},this.caption.innerHTML=i.title||"",this.updateCounter()}updateCounter(){if(!this.currentGallery)return;let t=this.galleries[this.currentGallery];this.counter.textContent=`${this.currentIndex+1} / ${t.length}`}handleKeyDown(t){if(this.isOpen)switch(t.key){case"Escape":this.close();break;case"ArrowLeft":this.previous();break;case"ArrowRight":this.next();break}}handleBackgroundClick(t){t.target===this.overlay&&this.close()}},m=o;
//# sourceMappingURL=index.js.map
