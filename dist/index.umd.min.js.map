{
  "version": 3,
  "sources": ["../src/index.js"],
  "sourcesContent": ["/**\n * TurboLight - A lightweight, vanilla JavaScript lightbox that works with Turbo Streams\n *\n * Features:\n * - Gallery support with navigation\n * - Keyboard navigation\n * - Caption support\n * - Counter display\n * - Multiple closing options\n * - Turbo compatibility\n */\nclass TurboLight {\n  constructor(options = {}) {\n    // Default options\n    this.options = Object.assign({\n      overlayClass: 'turbo-light-overlay',\n      containerClass: 'turbo-light-container',\n      imageClass: 'turbo-light-image',\n      captionClass: 'turbo-light-caption',\n      counterClass: 'turbo-light-counter',\n      closeClass: 'turbo-light-close',\n      prevClass: 'turbo-light-prev',\n      nextClass: 'turbo-light-next',\n      activeClass: 'turbo-light-active',\n      loadingClass: 'turbo-light-loading'\n    }, options);\n\n    // Initialize properties\n    this.galleries = {};\n    this.currentGallery = null;\n    this.currentIndex = 0;\n    this.isOpen = false;\n\n    // Bind methods to maintain 'this' context\n    this.handleClick = this.handleClick.bind(this);\n    this.close = this.close.bind(this);\n    this.next = this.next.bind(this);\n    this.previous = this.previous.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleBackgroundClick = this.handleBackgroundClick.bind(this);\n\n    // Store bound versions for event listener management\n    this.boundClose = this.close;\n    this.boundPrevious = this.previous;\n    this.boundNext = this.next;\n    this.boundHandleBackgroundClick = this.handleBackgroundClick;\n\n    // Initialize\n    this.init();\n  }\n\n  /**\n   * Initialize the lightbox\n   */\n  init() {\n    // Find all lightbox links and group them by gallery\n    this.findLinks();\n\n    // Create new lightbox elements\n    this.createLightboxElements();\n  }\n\n\n\n  /**\n   * Find all links with data-turbolight attribute and group them by gallery\n   */\n  findLinks() {\n    // Reset galleries\n    this.galleries = {};\n\n    // Find all links with data-turbolight attribute\n    const links = document.querySelectorAll('a[data-turbolight]');\n\n    // Group links by gallery\n    links.forEach(link => {\n      const galleryName = link.dataset.turbolight;\n      const title = link.dataset.title || '';\n      const href = link.getAttribute('href');\n\n      if (!this.galleries[galleryName]) {\n        this.galleries[galleryName] = [];\n      }\n\n      this.galleries[galleryName].push({\n        href,\n        title,\n        element: link\n      });\n\n      // Add click event listener\n      link.removeEventListener('click', this.handleClick);\n      link.addEventListener('click', this.handleClick);\n    });\n  }\n\n  /**\n   * Create the lightbox DOM elements\n   */\n  createLightboxElements() {\n    // Create overlay\n    this.overlay = document.createElement('div');\n    this.overlay.className = this.options.overlayClass;\n\n    // Create container for the image\n    this.container = document.createElement('div');\n    this.container.className = this.options.containerClass;\n\n    // Create image element\n    this.image = document.createElement('img');\n    this.image.className = this.options.imageClass;\n\n    // Create caption\n    this.caption = document.createElement('div');\n    this.caption.className = this.options.captionClass;\n\n    // Create counter\n    this.counter = document.createElement('div');\n    this.counter.className = this.options.counterClass;\n\n    // Create close button\n    this.closeButton = document.createElement('button');\n    this.closeButton.className = this.options.closeClass;\n    this.closeButton.innerHTML = '&times;';\n    this.closeButton.setAttribute('aria-label', 'Close lightbox');\n\n    // Create navigation buttons\n    this.prevButton = document.createElement('button');\n    this.prevButton.className = this.options.prevClass;\n    this.prevButton.innerHTML = '&#10094;';\n    this.prevButton.setAttribute('aria-label', 'Previous image');\n\n    this.nextButton = document.createElement('button');\n    this.nextButton.className = this.options.nextClass;\n    this.nextButton.innerHTML = '&#10095;';\n    this.nextButton.setAttribute('aria-label', 'Next image');\n\n    // Assemble the elements\n    this.container.appendChild(this.image);\n    this.container.appendChild(this.caption);\n    this.overlay.appendChild(this.container);\n    this.overlay.appendChild(this.counter);\n    this.overlay.appendChild(this.closeButton);\n    this.overlay.appendChild(this.prevButton);\n    this.overlay.appendChild(this.nextButton);\n\n    // Add event listeners with properly bound context\n    this.closeButton.addEventListener('click', this.boundClose);\n    this.prevButton.addEventListener('click', this.boundPrevious);\n    this.nextButton.addEventListener('click', this.boundNext);\n    this.overlay.addEventListener('click', this.boundHandleBackgroundClick);\n\n    // Add to document\n    document.body.appendChild(this.overlay);\n  }\n\n  /**\n   * Handle click on lightbox link\n   * @param {Event} event - Click event\n   */\n  handleClick(event) {\n    event.preventDefault();\n    const link = event.currentTarget;\n    this.open(link);\n  }\n\n  /**\n   * Open the lightbox with the specified link\n   * @param {HTMLElement} link - The link element that was clicked\n   */\n  open(link) {\n    // If the overlay was removed (after close), recreate the lightbox elements\n    if (!this.overlay) {\n      this.createLightboxElements();\n    }\n\n    // Get the gallery name and index\n    const galleryName = link.dataset.turbolight;\n    this.currentGallery = galleryName;\n    const gallery = this.galleries[galleryName];\n    const index = gallery.findIndex(item => item.element === link);\n\n    // Show the lightbox\n    this.overlay.classList.add(this.options.activeClass);\n    this.isOpen = true;\n\n    // Prevent body scrolling\n    document.body.style.overflow = 'hidden';\n\n    // Load the image\n    this.showImage(index);\n\n    // Add keyboard event listener\n    document.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  /**\n   * Close the lightbox and remove elements from DOM\n   */\n  close() {\n    if (!this.overlay) return;\n\n    // Hide the lightbox\n    this.overlay.remove();\n\n    // Remove keyboard event listener\n    document.removeEventListener('keydown', this.handleKeyDown);\n\n    // Restore body scrolling\n    document.body.style.overflow = '';\n\n    // Reset current state\n    this.isOpen = false;\n    this.currentGallery = null;\n    this.currentIndex = 0;\n    this.overlay = null;\n    this.container = null;\n    this.image = null;\n    this.caption = null;\n    this.counter = null;\n    this.closeButton = null;\n    this.prevButton = null;\n    this.nextButton = null;\n  }\n\n  /**\n   * Show the next image\n   */\n  next() {\n    if (!this.currentGallery) return;\n\n    const gallery = this.galleries[this.currentGallery];\n    let nextIndex = this.currentIndex + 1;\n\n    // Loop back to the beginning if at the end\n    if (nextIndex >= gallery.length) {\n      nextIndex = 0;\n    }\n\n    this.showImage(nextIndex);\n  }\n\n  /**\n   * Show the previous image\n   */\n  previous() {\n    if (!this.currentGallery) return;\n\n    const gallery = this.galleries[this.currentGallery];\n    let prevIndex = this.currentIndex - 1;\n\n    // Loop to the end if at the beginning\n    if (prevIndex < 0) {\n      prevIndex = gallery.length - 1;\n    }\n\n    this.showImage(prevIndex);\n  }\n\n  /**\n   * Show an image by index\n   * @param {number} index - Index of the image to show\n   */\n  showImage(index) {\n    if (!this.currentGallery) return;\n\n    const gallery = this.galleries[this.currentGallery];\n    if (index < 0 || index >= gallery.length) {\n      console.error(`Invalid index: ${index}`);\n      return;\n    }\n\n    // Update current index\n    this.currentIndex = index;\n\n    // Get the image data\n    const imageData = gallery[index];\n\n    // Show loading state\n    this.container.classList.add(this.options.loadingClass);\n\n    // Update the image\n    this.image.src = imageData.href;\n    this.image.onload = () => {\n      this.container.classList.remove(this.options.loadingClass);\n    };\n\n    // Update the caption\n    this.caption.innerHTML = imageData.title || '';\n\n    // Update the counter\n    this.updateCounter();\n  }\n\n  /**\n   * Update the counter display\n   */\n  updateCounter() {\n    if (!this.currentGallery) return;\n\n    const gallery = this.galleries[this.currentGallery];\n    this.counter.textContent = `${this.currentIndex + 1} / ${gallery.length}`;\n  }\n\n  /**\n   * Handle keyboard events\n   * @param {KeyboardEvent} event\n   */\n  handleKeyDown(event) {\n    if (!this.isOpen) return;\n\n    switch (event.key) {\n      case 'Escape':\n        this.close();\n        break;\n      case 'ArrowLeft':\n        this.previous();\n        break;\n      case 'ArrowRight':\n        this.next();\n        break;\n    }\n  }\n\n  /**\n   * Handle click on the background\n   * @param {MouseEvent} event\n   */\n  handleBackgroundClick(event) {\n    // Close only if clicking directly on the overlay, not its children\n    if (event.target === this.overlay) {\n      this.close();\n    }\n  }\n}\n\n// Export for module usage\nexport default TurboLight;\n"],
  "mappings": "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",
  "names": ["src_exports", "__export", "src_default", "TurboLight", "options", "link", "galleryName", "title", "href", "event", "index", "item", "gallery", "nextIndex", "prevIndex", "imageData"]
}
